<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:ORControlPanelNew.ViewModels.Intercom"
             xmlns:conv="using:ORControlPanelNew.Converters"
             x:Class="ORControlPanelNew.Views.Intercom.IntercomPanel"
             x:DataType="vm:IntercomDialogViewModel">
    <UserControl.Resources>
        <conv:ZeroToVisibilityConverter x:Key="ZeroToVisibilityConverter"/>
    </UserControl.Resources>
    <UserControl.DataContext>
        <vm:IntercomDialogViewModel/>
    </UserControl.DataContext>
    <UserControl.Styles>
        <Style Selector="Button.dialer-btn">
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="#f0f0f0"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderBrush" Value="#b0b0b0"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>
    </UserControl.Styles>
    <Border Background="#232323" CornerRadius="16" Padding="48,24" MinHeight="0" MaxHeight="1200" HorizontalAlignment="Center" VerticalAlignment="Top">
        <Grid ColumnDefinitions="1*,1*" Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <!-- Dialer Section -->
            <Grid Grid.Column="0" RowDefinitions="Auto,*,Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0,0,8,0">
                <!-- Display -->
                <TextBox Grid.Row="0" Text="{Binding DialedNumber, Mode=OneWay}" FontSize="20" Height="36" Margin="0,0,0,0" IsReadOnly="True" HorizontalAlignment="Stretch"/>
                <!-- Dialer Buttons -->
                <Grid Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button Content="1" Command="{Binding DialCommand}" CommandParameter="1" Grid.Row="0" Grid.Column="0" Classes="dialer-btn"/>
                    <Button Content="2" Command="{Binding DialCommand}" CommandParameter="2" Grid.Row="0" Grid.Column="1" Classes="dialer-btn"/>
                    <Button Content="3" Command="{Binding DialCommand}" CommandParameter="3" Grid.Row="0" Grid.Column="2" Classes="dialer-btn"/>
                    <Button Content="4" Command="{Binding DialCommand}" CommandParameter="4" Grid.Row="1" Grid.Column="0" Classes="dialer-btn"/>
                    <Button Content="5" Command="{Binding DialCommand}" CommandParameter="5" Grid.Row="1" Grid.Column="1" Classes="dialer-btn"/>
                    <Button Content="6" Command="{Binding DialCommand}" CommandParameter="6" Grid.Row="1" Grid.Column="2" Classes="dialer-btn"/>
                    <Button Content="7" Command="{Binding DialCommand}" CommandParameter="7" Grid.Row="2" Grid.Column="0" Classes="dialer-btn"/>
                    <Button Content="8" Command="{Binding DialCommand}" CommandParameter="8" Grid.Row="2" Grid.Column="1" Classes="dialer-btn"/>
                    <Button Content="9" Command="{Binding DialCommand}" CommandParameter="9" Grid.Row="2" Grid.Column="2" Classes="dialer-btn"/>
                    <Button Content="*" Command="{Binding DialCommand}" CommandParameter="*" Grid.Row="3" Grid.Column="0" Classes="dialer-btn"/>
                    <Button Content="0" Command="{Binding DialCommand}" CommandParameter="0" Grid.Row="3" Grid.Column="1" Classes="dialer-btn"/>
                    <Button Content="#" Command="{Binding DialCommand}" CommandParameter="#" Grid.Row="3" Grid.Column="2" Classes="dialer-btn"/>
                </Grid>
                <!-- Backspace and Call Row -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Stretch" Spacing="8" Margin="0,24,0,0">
                    <Button Content="Del" Command="{Binding BackspaceCommand}" Height="32" HorizontalAlignment="Stretch"/>
                    <Button Content="ðŸ“ž" Height="32" HorizontalAlignment="Stretch"/>
                </StackPanel>
            </Grid>
            <!-- Phonebook Section -->
            <StackPanel Grid.Column="1" Margin="16,0,0,0" Spacing="8" HorizontalAlignment="Stretch">
                <TextBlock Text="Phonebook" FontWeight="Bold" FontSize="15"/>
                <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Stretch">
                    <TextBlock Text="Name" Width="50"/>
                    <TextBox Text="{Binding NewContactName, Mode=TwoWay}" HorizontalAlignment="Stretch"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Stretch">
                    <TextBlock Text="Number" Width="50"/>
                    <TextBox Text="{Binding NewContactNumber, Mode=TwoWay}" HorizontalAlignment="Stretch"/>
                </StackPanel>
                <Button Content="Save" Command="{Binding SaveContactCommand}" HorizontalAlignment="Stretch"/>
                <TextBlock Text="No contacts saved."
                           IsVisible="{Binding Contacts.Count, Converter={StaticResource ZeroToVisibilityConverter}}"
                           Foreground="Gray" FontStyle="Italic" Margin="0,4,0,0" FontSize="12"/>
                <ItemsControl ItemsSource="{Binding Contacts}" Margin="0,8,0,0">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="LimeGreen" BorderThickness="1.5" CornerRadius="6" Margin="0,2,0,2" Padding="4">
                                <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}" FontWeight="Bold" Foreground="LimeGreen" FontSize="12"/>
                                    <TextBlock Text=":" FontWeight="Bold" Foreground="LimeGreen" FontSize="12"/>
                                    <TextBlock Text="{Binding Number}" Foreground="LimeGreen" FontSize="12"/>
                                    <Button Content="Delete"
                                            Click="OnDeleteContactClick"
                                            CommandParameter="{Binding .}"
                                            Background="Red"
                                            Foreground="White"
                                            Margin="8,0,0,0"
                                            Padding="4,1"
                                            FontWeight="Bold"
                                            FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Grid>
    </Border>
</UserControl> 